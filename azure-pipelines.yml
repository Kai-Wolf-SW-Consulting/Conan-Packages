jobs:

- job: Windows
  pool:
    vmImage: 'vs2017-win2016'
  variables:
    PROFILE: 'profiles/windows_x86_64_visual_studio_15_2017'
  timeoutInMinutes: 0
  steps:
  - task: UsePythonVersion@0
    inputs:
      versionSpec: '3.7'
  - template: templates/setup-conan.yml
  - template: templates/build-package.yml
    parameters: ["googletest", "qt", "tbb", "vtk", "vtk_dicom"]
  strategy:
    matrix:
      Release:
        BUILD_TYPE: 'Release'

- job: macOS
  pool:
    vmImage: 'macOS-10.14'
  variables:
    PROFILE: 'profiles/macos_x86_64_apple_clang_11_0'
  timeoutInMinutes: 0
  steps:
  - task: UsePythonVersion@0
    inputs:
      versionSpec: '3.7'
  - script: |
      brew update
      brew install conan || brew upgrade conan
  - template: templates/setup-conan.yml
  - template: templates/build-package.yml
    parameters: ["googletest", "qt", "tbb", "vtk", "vtk_dicom"]
  strategy:
    matrix:
      Release:
          BUILD_TYPE: 'Release'

